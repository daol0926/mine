"use strict";!function(){function n(t){var a=this;this.dragObj=t,this.startDrag=function(t){t.stopPropagation();var s=$pm.zoomRate||1,n=("touchmove"==t.type?t.touches[0]:t).clientY,o=("touchmove"==t.type?t.touches[0]:t).clientX,i=this.dragObj.offsetTop,r=this.dragObj.offsetLeft;function e(t){var e=("touchmove"==t.type?t.touches[0]:t).clientY,t=(("touchmove"==t.type?t.touches[0]:t).clientX-o)/s+r;a.dragObj.style.top=(e-n)/s+i+"px",a.dragObj.style.left=t+"px"}function d(){document.removeEventListener("mousemove",e),document.removeEventListener("touchmove",e),document.removeEventListener("mouseup",d),document.removeEventListener("touchend",d)}this.dragObj.style.transition="none",document.addEventListener("mousemove",e),document.addEventListener("touchmove",e),document.addEventListener("mouseup",d),document.addEventListener("touchend",d)},this.dragObj.addEventListener("mousedown",this.startDrag.bind(this)),this.dragObj.addEventListener("touchstart",this.startDrag.bind(this))}new function(t){var s=this;this.dragObj=t,this.keyPressed={},this.start=function(){function t(t){s.keyPressed[t.keyCode]=!0,s.targetMove()}for(var e in this.dragObj)this.dragObj[e].style.position="absolute",new n(this.dragObj[e]),this.dragObj[e].addEventListener("click",function(){s.target=s.dragObj[e],document.removeEventListener("keydown",t),document.addEventListener("keydown",t),document.addEventListener("keyup",function(t){s.keyPressed[t.keyCode]=!1})})},this.targetMove=function(){var t=1;this.keyPressed[16]?t=10:this.keyPressed[17]&&(t=100),this.keyPressed[39]?this.target.style.left=parseInt(this.target.style.left)+t+"px":this.keyPressed[37]?this.target.style.left=parseInt(this.target.style.left)-t+"px":this.keyPressed[40]?this.target.style.top=this.target.offsetTop+t+"px":this.keyPressed[38]&&(this.target.style.top=this.target.offsetTop-t+"px")},this.start()}($ts.getEl("[drag]"))}();