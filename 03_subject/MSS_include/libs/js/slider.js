"use strict";!function(){function t(s,e){var a=this;return(a={container:s.container,slides:[],tabs:[],prevBtn:null,nextBtn:null,toggleBtn:null,length:0,idx:0,dspIdx:0,active:!1,opts:{carousel:{wrapper:null,loop:{left:!1,right:!1},transitionDuration:0,timeout:0},callbacks:{move:void 0,reset:void 0},slideClass:null,tabClass:null,btnClass:null},swipe:{BLOCK_QUERIES:["[data-drag]",".js-dragLineObj",".js-dragObj",".handleBar",".handler","[data-ox-obj]","[data-ox-target]","[data-toggle-obj]","[data-click-obj]","[data-show-obj]","[data-self-obj]","[data-url]","[data-download-file]","[data-btn-prev]","[data-btn-next]","[data-tab]"],slider:void 0,downEvented:!1,initialTimestamp:0,initialX:0,initialY:0,downEventHandler:function(t){window.pageYOffset||this.validateHasBlockedQuery(t.target)||(t.stopPropagation(),this.downEvented=!0,this.initialTimestamp=t.timeStamp,this.initialX=t.clientX||t.changedTouches[0].clientX,this.initialY=t.clientY||t.changedTouches[0].clientY,this.addMoveEvent(),this.addUpEvent())},moveEventHandler:function(t){var s,e,i,n;this.downEvented&&(s=this.slider,t.preventDefault(),t.stopPropagation(),e=(t.clientX||t.changedTouches[0].clientX)-this.initialX,t.clientY||t.changedTouches[0].clientY,this.initialY,150<t.timeStamp-this.initialTimestamp&&this.stop(),i=e<-50,n=0===s.idx||s.opts.carousel&&s.opts.carousel.loop&&!s.opts.carousel.loop.left&&1===s.idx,t=s.idx===s.slideLength-1||s.opts.carousel&&s.opts.carousel.loop&&!s.opts.carousel.loop.right&&s.idx===s.slideLength-2,50<e?n||(s.idx=s.idx-1,s.changeMoves(),this.stop()):i&&(t||(s.idx=s.idx+1,s.changeMoves(),this.stop())))},upEventHandler:function(){this.downEvented&&(this.downEvented=!1,this.removeMoveEvent(),this.removeUpEvent())},addDownEvent:function(){this.slider.container.addEventListener("touchstart",this.downEventHandler.bind(this),{passive:!1}),this.slider.container.addEventListener("mousedown",this.downEventHandler.bind(this),{passive:!1})},addMoveEvent:function(){this.slider.container.addEventListener("touchmove",this.moveEventHandler.bind(this),{passive:!1}),this.slider.container.addEventListener("mousemove",this.moveEventHandler.bind(this),{passive:!1})},removeMoveEvent:function(){this.slider.container.removeEventListener("touchmove",this.moveEventHandler.bind(this),{passive:!1}),this.slider.container.removeEventListener("mousemove",this.moveEventHandler.bind(this),{passive:!1})},addUpEvent:function(){this.slider.container.addEventListener("touchend",this.upEventHandler.bind(this),{passive:!1}),this.slider.container.addEventListener("mouseup",this.upEventHandler.bind(this),{passive:!1})},removeUpEvent:function(){this.slider.container.removeEventListener("touchend",this.upEventHandler.bind(this),{passive:!1}),this.slider.container.removeEventListener("mouseup",this.upEventHandler.bind(this),{passive:!1})},initiate:function(t){this.slider=t.slider,this.addDownEvent()},stop:function(){this.downEvented=!1,this.removeMoveEvent(),this.removeUpEvent()},validateHasBlockedQuery:function(s){var e=s.className,t=(e="string"==typeof e&&e)&&this.BLOCK_QUERIES.some(function(t){return/\./gi.test(t)&&-1<e.indexOf(t.replace(".",""))}),i=this.BLOCK_QUERIES.some(function(t){return/\[/gi.test(t)&&s.hasAttribute(t.replace(/\[|\]/gi,""))});return t||i},addBlockedQuery:function(t){this.BLOCK_QUERIES.push(t)}},init:function(){this.setOpts(),this.setSlides(),s.tabs&&this.setTabs(),s.prevBtn&&s.nextBtn&&this.setBtns(),s.toggleBtn&&this.toggleBtns(),this.opts.carousel?this.setCarousel():this.changeMoves(),function(){for(var t=this.container.children,s=!1,e=0;e<t.length;e++)if(t[e].hasAttribute("data-slide-btn-container")){s=!0;break}s&&this.swipe.initiate({slider:this})}.bind(this)(),this.active||(this.active=!0)},setOpts:function(){this.opts=e,this.opts.slideClass||(this.opts.slideClass="on"),this.opts.tabClass||(this.opts.tabClass="on"),this.opts.btnClass||(this.opts.btnClass="off")},setSlides:function(){this.length=s.slides.length;for(var t=0;t<this.length;t++)this.slides[t]=s.slides[t]},setTabs:function(){for(var t=0;t<s.tabs.length;t++)this.tabs[t]=s.tabs[t];this.tabs.forEach(function(t){t.setAttribute("data-tab",""),t.addEventListener("click",a.tabClick,!1),t.addEventListener("click",$efSound.click2)})},setBtns:function(){this.prevBtn=s.prevBtn,this.nextBtn=s.nextBtn,this.prevBtn.addEventListener("click",this.btnClick),this.nextBtn.addEventListener("click",this.btnClick),this.prevBtn.addEventListener("click",$efSound.click),this.nextBtn.addEventListener("click",$efSound.click)},setCarousel:function(){if(this.checkContainer(),this.opts.carousel.wrapper){var t,s,e=this.opts.carousel.wrapper;$ts.setStyles(e,{top:0,left:0,height:"100%",overflow:"hidden",clear:"left"}),t=this.slides[this.slides.length-1].cloneNode(!0),e.insertBefore(t,this.slides[0]),s=this.slides[0].cloneNode(!0),e.appendChild(s),s=$ts.concatArrays([[t],this.slides,[s]]),this.slides=s;for(var i={float:"left",position:"relative",display:"block"},n=0;n<this.slideLength;n++){var o=this.slides[n];$ts.setStyles(o,i)}this.setCarouselWidth(),a.idx=1,this.changeMoves()}},checkContainer:function(){var t=$ts.getStyles(this.container);"absolute"===t.position||t.position,t.overflow},setCarouselWidth:function(){this.opts.carousel.wrapper.style.width=this.containerWidth*this.slideLength+"px";for(var t=0;t<this.slideLength;t++)this.slides[t].style.width=this.containerWidth+"px"},carouselSlideMoves:function(t){var s=(t&&t.idx?t:this).idx,e=this.opts.carousel.wrapper,s=(t&&t.width?t.width:this.containerWidth)*s;e.style.transform="translateX(-"+s+"px)",e.style.msTransform="translateX(-"+s+"px)",e.style.webkitTransform="translateX(-"+s+"px)"},tabClick:function(){var e=this;a.tabs.forEach(function(t,s){e===t&&(a.idx=a.opts.carousel?s+1:s)}),a.changeMoves()},btnClick:function(){var t=0===a.idx||a.opts.carousel&&a.opts.carousel.loop&&!a.opts.carousel.loop.left&&1===a.idx,s=a.idx===a.slideLength-1||a.opts.carousel&&a.opts.carousel.loop&&!a.opts.carousel.loop.right&&a.idx===a.slideLength-2;this===a.prevBtn?t||(a.idx--,a.changeMoves()):s||(a.idx++,a.changeMoves()),a.imageView(this,a.idx)},imageView:function(t,s){var e;a.container.querySelector("[data-view-count]")&&(e=s,s=a.container.querySelector("[data-view-count]"),s=parseInt(s.getAttribute("data-view-count")),this.tabs.length,t===a.prevBtn?-1<this.tabs[e].className.indexOf("displayN")&&this.tabs[e].classList.remove("displayN"):s<=e&&this.tabs[e-s].classList.add("displayN"))},changeMoves:function(t){this.changeDspIdx(),this.slideMoves(t),this.tabMoves(),this.btnMoves(),!(this.active&&this.opts.callbacks&&this.opts.callbacks.move)||t&&t.resetMoves||e.callbacks.move(this)},changeDspIdx:function(){this.opts.carousel?0===this.idx?this.dspIdx=this.length-1:this.idx===this.length+1?this.dspIdx=0:this.dspIdx=this.idx-1:this.dspIdx=this.idx},slideMoves:function(t){var s,e=this,i=this.opts.slideClass||"";this.opts.carousel?(s=this.opts.carousel.wrapper,this.carouselSlideMoves(),!this.active||t&&t.noSlideMoves||(s.style.transition="transform "+this.opts.carousel.transitionDuration+"ms",this.carouselTimeout())):e.slides.forEach(function(t,s){t.classList.remove(i),e.idx===s&&t.classList.add(i)})},tabMoves:function(){if(this.tabs&&0!==this.tabs.length){var e=this,i=this.opts.tabClass||"";if(e.tabs.forEach(function(t,s){t.removeAttribute("data-prev"),t.classList.remove(i),e.dspIdx===s&&(t.previousElementSibling&&t.previousElementSibling.setAttribute("data-prev",""),t.classList.add(i))}),a.container.querySelector("[data-view-count]")){var t=parseInt(a.container.querySelector("[data-view-count]").getAttribute("data-view-count")),s=e.idx+1;if(t<s)for(var n=0;n<s-4;n++)e.tabs[n].classList.add("displayN")}}},btnMoves:function(){var t,s,e;this.prevBtn&&this.nextBtn&&(t=this.opts.btnClass||null,s=this.opts.carousel&&this.opts.carousel.loop&&this.opts.carousel.loop.left,e=this.opts.carousel&&this.opts.carousel.loop&&this.opts.carousel.loop.right,t&&(0===this.dspIdx?s||this.prevBtn.classList.add(t):this.prevBtn.classList.remove(t),this.dspIdx===this.length-1?e||this.nextBtn.classList.add(t):this.nextBtn.classList.remove(t)))},toggleBtnClick:function(){var t=this.toggleBtn;t.classList.contains("on")?(t.classList.remove("on"),this.slides[0].parentNode.classList.remove("off")):(t.classList.add("on"),this.slides[0].parentNode.classList.add("off"))},disableAll:function(t){if(this.tabs)for(var s=this.tabs.length,e=0;e<s;e++){var i=this.tabs[e];i.style.pointerEvents=t?"none":"auto"}this.prevBtn&&(this.prevBtn.style.pointerEvents=t?"none":"auto"),this.nextBtn&&(this.nextBtn.style.pointerEvents=t?"none":"auto")},carouselTimeout:function(){var t=this;this.disableAll(!0),t.opts.carousel.timeout=window.setTimeout(function(){t.opts.carousel.wrapper.transition="none",t.disableAll(!1),window.clearTimeout(t.opts.carousel.timeout),t.opts.carousel&&(t.idx===t.length+1?t.idx=1:0===t.idx&&(t.idx=t.length),t.opts.carousel.wrapper.style.transition="none",t.slideMoves({noSlideMoves:!0}))},t.opts.carousel.transitionDuration)},reset:function(t){this.idx=this.opts.carousel?1:0,0<arguments.length&&t.idx&&(this.idx=t.idx),this.changeMoves({noSlideMoves:!0,resetMoves:!0}),this.opts.callbacks&&this.opts.callbacks.reset&&this.active&&this.opts.callbacks.reset(this)},addCallbacks:function(t){if(this.opts.callbacks)for(var s in t)this.opts.callbacks[s]=t[s];else this.opts.callbacks=t},get containerWidth(){return parseInt($ts.getStyles(this.container).width)},get slideLength(){return this.slides.length}}).init(),a}"undefined"!=typeof module&&void 0!==module.exports?module.exports=t:window.$slider=t}();